

<html>
<head>
<script>
function UserAction() {
    var xhttp = new XMLHttpRequest();
    var request = "http://api.openweathermap.org/data/2.5/forecast?q=Wollongong,au&appid=cfbca24d7a2ff332e6f444149b8bbee3"
  
  xhttp.onreadystatechange = function() {
    if (xhttp.readyState == 4 && xhttp.status == 200) {
      processResult(xhttp);
    }
  };
  xhttp.open("GET", request);
  xhttp.send();
}
function processResult(xhttp){
  var jsonText = xhttp.responseText;
  
  var postsObj = JSON.parse(jsonText);
  var date = Date.now();
  console.log(date);
  display(postsObj); 
}
function isEmpty(obj) {
    for(var key in obj) {
        if(obj.hasOwnProperty(key))
            return false;
    }
    return true;
}
function display(postObj)
{
	console.log(postObj);
	for(var i = 0; i < postObj.list.length; i++)
	{
    // Retrieves date from each object
    var fulldatetime = postObj.list[i].dt_txt;
    var fulldate = new Date(fulldatetime);
    
    //Takes the time, day and month from date object
    var hour = fulldate.getHours();
    var day = fulldate.getDate();
    var month = fulldate.getMonth() + 1;
		
    //Retrieves the temperature and converts it from Kelvin to celsius to 2 DP
    var temp = postObj.list[i].main.temp - 273.15;
    temp = Math.round(temp * 100) / 100;
    myObj = postObj.list[i].rain;
   
    
    // Checks to see if there is any rain being recorded for the 3 hour period. If is empty, no rain, else, there is some rain expected
    if(i == 0 || 10)  
     {
      if(isEmpty(Object.values(myObj)))
      {
          if(i == 0)
          {
            console.log("No This morning");
          } else if(i == 10)
          {
            console.log("No rain tomorrow morning");
          }

      } else {
        if(i == 0)
        {
          console.log("Rain expected this morning: " + Object.values(myObj)[0] + "mm");
        } else if (i == 10)
        {
          console.log("Rain expected tomorrow: " + Object.values(myObj)[0] + "mm");
        }
      
      }
    }
    
	}
}
		
</script>

<body>
<button type="submit" onclick="UserAction()">Search</button>
</body>
</head>
</html>
